{# @var craft \craft\web\twig\variables\CraftVariable #}
{#
/**
 * Varnish plugin for Craft CMS 3.x
 *
 * Varnish Settings.twig
 *
 * @author    Venveo
 * @copyright Copyright (c) 2019 Venveo
 * @link      https://www.venveo.com
 * @package   Varnish
 * @since     1.0.0
 */
#}

{% import "_includes/forms" as forms %}

{{ forms.lightswitchField({
    label:        "Activate redirects"|t('vredirect'),
    instructions: "This switch activate/de-activate all the entered redirects without removing them."|t('vredirect'),
    id:           'redirectsActive',
    name:         'redirectsActive',
    on:           settings.redirectsActive,
    errors:       settings.getErrors('redirectsActive')
}) }}

{{ forms.lightswitchField({
    label:        "Catch all 404s"|t('vredirect'),
    instructions: "404s will be caught and logged when this setting is active"|t('vredirect'),
    id:           'catchAllActive',
    name:         'catchAllActive',
    on:           settings.catchAllActive,
    errors:       settings.getErrors('catchAllActive')
}) }}

{{ forms.lightswitchField({
    label:        "Trim trailing slash from URLs on save"|t('vredirect'),
    instructions: "If set, when redirects are saved, the trailing slash will be removed. Typically, you want this."|t('vredirect'),
    id:           'trimTrailingSlashFromPath',
    name:         'trimTrailingSlashFromPath',
    on:           settings.trimTrailingSlashFromPath,
    errors:       settings.getErrors('trimTrailingSlashFromPath')
}) }}

{{ forms.lightswitchField({
    label:        "Store referrers"|t('vredirect'),
    instructions: "If enabled, we'll store the last referral URL for registered 404s"|t('vredirect'),
    id:           'storeReferrer',
    name:         'storeReferrer',
    on:           settings.storeReferrer,
    errors:       settings.getErrors('storeReferrer')
}) }}

{{ forms.lightswitchField({
    label:        "Delete stale 404s"|t('vredirect'),
    instructions: "If enabled, we'll delete any registered 404s that haven't been hit in a while."|t('vredirect'),
    id:           'deleteStale404s',
    name:         'deleteStale404s',
    on:           settings.deleteStale404s,
    errors:       settings.getErrors('deleteStale404s')
}) }}

{{ forms.textField({
    type:         'number',
    label:        "Control how long to wait before a 404 is considered stale"|t('vredirect'),
    instructions: "Enter how many hours to wait before a redirect is considered stale"|t('vredirect'),
    id:           'deleteStale404sHours',
    name:         'deleteStale404sHours',
    value:           settings.deleteStale404sHours,
    errors:       settings.getErrors('deleteStale404sHours')
}) }}
